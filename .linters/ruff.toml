# Ruff configuration for FastAPI / FastMCP projects.
# https://docs.astral.sh/ruff/
#
# Install:  pip install ruff   (or: uv add --dev ruff)
# Check:    ruff check .
# Fix:      ruff check . --fix
# Format:   ruff format .
#
# Copy to your project root as ruff.toml, or merge the sections below
# into pyproject.toml under [tool.ruff], [tool.ruff.lint], etc.
#
# What is enforced:
#   N8xx (pep8-naming):
#     N801  — class names: PascalCase (TrailBase, AccountCreate, TrailNotFoundError)
#     N802  — function names: snake_case (get_trail, list_trails, create_trail)
#     N803  — argument names: snake_case (trail_id, account_id, trail_data)
#     N806  — variable names in functions: snake_case
#     N811-N817 — import naming conventions
#
# What is documented but not auto-enforced:
#   - Route handler verb prefix (get_, list_, create_, update_, delete_, patch_)
#   - Pydantic model suffix (Base, Create, Update, Response, InDB)
#   - Dependency function verb prefix (get_, verify_)
#   - Route path kebab-case (/trail-segments) — defined as strings, not identifiers
#   - File naming (snake_case) — Ruff does not lint filenames
#   - Exception class suffix (Error / Exception)

target-version = "py311"
line-length = 88

[lint]
select = [
  "E",    # pycodestyle errors
  "W",    # pycodestyle warnings
  "F",    # pyflakes (unused imports, undefined names)
  "N",    # pep8-naming — enforces snake_case functions, PascalCase classes
  "I",    # isort — import ordering
  "UP",   # pyupgrade — modern Python syntax
  "B",    # flake8-bugbear — likely bugs and design issues
  "C4",   # flake8-comprehensions — idiomatic list/dict/set comprehensions
  "SIM",  # flake8-simplify — simpler code patterns
  "FAST", # FastAPI-specific checks (route handler signatures, dependencies)
]

ignore = [
  "E501", # line length — handled by formatter
]

[lint.pep8-naming]
# Recognise Pydantic validators as classmethods so N805 does not fire
classmethod-decorators = [
  "classmethod",
  "pydantic.validator",
  "pydantic.field_validator",
  "pydantic.model_validator",
]

[lint.isort]
known-first-party = ["app"]  # adjust to your package name

[format]
quote-style = "double"
indent-style = "space"
line-ending = "auto"
